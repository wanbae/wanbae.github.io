<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backup Dashboard - Wan Bae</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="backups.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="theme-toggle" onclick="toggleTheme()">
        <span id="theme-icon">ğŸŒ™</span>
    </div>

    <header class="page-header">
        <div class="container">
            <a href="../index.html" class="back-link">â† Back to Home</a>
            <h1>ğŸ’¾ Backup Dashboard</h1>
            <p class="subtitle">ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… í˜„í™© ëª¨ë‹ˆí„°ë§</p>
            <div class="last-updated">
                ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: <span id="last-updated">í™•ì¸ ì¤‘...</span>
            </div>
        </div>
    </header>

    <main class="container">
        <section class="backup-overview">
            <h2>ë°±ì—… ê°œìš”</h2>
            <div class="overview-grid">
                <div class="overview-card">
                    <div class="overview-icon">âœ…</div>
                    <div class="overview-value" id="successful-backups">-</div>
                    <div class="overview-label">ì„±ê³µí•œ ë°±ì—…</div>
                </div>
                <div class="overview-card">
                    <div class="overview-icon">ğŸ“¦</div>
                    <div class="overview-value" id="total-size">-</div>
                    <div class="overview-label">ì´ ë°±ì—… í¬ê¸°</div>
                </div>
                <div class="overview-card">
                    <div class="overview-icon">â°</div>
                    <div class="overview-value">02:00 UTC</div>
                    <div class="overview-label">ë°±ì—… ìŠ¤ì¼€ì¤„</div>
                </div>
                <div class="overview-card">
                    <div class="overview-icon">ğŸ”„</div>
                    <div class="overview-value">30ì¼</div>
                    <div class="overview-label">ë³´ê´€ ê¸°ê°„</div>
                </div>
            </div>
        </section>

        <section class="backup-status">
            <h2>í”„ë¡œì íŠ¸ë³„ ë°±ì—… ìƒíƒœ</h2>
            <div id="backup-list" class="backup-list">
                <!-- ë°±ì—… ì¹´ë“œê°€ ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                <div class="backup-skeleton">
                    <div class="skeleton-loader"></div>
                </div>
                <div class="backup-skeleton">
                    <div class="skeleton-loader"></div>
                </div>
                <div class="backup-skeleton">
                    <div class="skeleton-loader"></div>
                </div>
            </div>
        </section>

        <section class="backup-size-chart">
            <h2>ë°±ì—… í¬ê¸° ì¶”ì´</h2>
            <div class="chart-container">
                <canvas id="backupSizeChart"></canvas>
            </div>
        </section>

        <section class="backup-schedule">
            <h2>ğŸ“… ë°±ì—… ìŠ¤ì¼€ì¤„</h2>
            <div class="schedule-grid">
                <div class="schedule-card">
                    <h3>âš¡ ChargeBook</h3>
                    <div class="schedule-time">ğŸ• ë§¤ì¼ 02:00 UTC</div>
                    <div class="schedule-path"><code>/home/ubuntu/chargebook/scripts/backup-prod-db.sh</code></div>
                    <div class="schedule-log">ë¡œê·¸: <code>/home/ubuntu/chargebook/logs/cron_backup.log</code></div>
                </div>

                <div class="schedule-card">
                    <h3>ğŸ§ Proud English</h3>
                    <div class="schedule-time">ğŸ• ë§¤ì¼ 02:05 UTC</div>
                    <div class="schedule-path"><code>/home/ubuntu/proud_english/scripts/backup-prod-db.sh</code></div>
                    <div class="schedule-log">ë¡œê·¸: <code>/home/ubuntu/proud_english/logs/cron_backup.log</code></div>
                </div>

                <div class="schedule-card">
                    <h3>ğŸ•ï¸ Reserve Camping</h3>
                    <div class="schedule-time">ğŸ• ë§¤ì¼ 02:10 UTC</div>
                    <div class="schedule-path"><code>/home/ubuntu/reserve-camping/scripts/backup-prod-db.sh</code></div>
                    <div class="schedule-log">ë¡œê·¸: <code>/home/ubuntu/reserve-camping/logs/cron_backup.log</code></div>
                </div>
            </div>
        </section>

        <section class="backup-warnings">
            <h2>âš ï¸ ì£¼ì˜ì‚¬í•­</h2>
            <div class="warning-list">
                <div class="warning-item info">
                    <div class="warning-icon">â„¹ï¸</div>
                    <div class="warning-content">
                        <h3>PostgreSQL Collation Version</h3>
                        <p><strong>reserve-camping DB:</strong> collation version mismatch (2.36 â†’ 2.41)</p>
                        <p class="warning-detail">ë°±ì—…ì€ ì •ìƒ ì‘ë™í•˜ì§€ë§Œ, ì¸ë±ìŠ¤ ì†ìƒ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤. ìœ ì§€ë³´ìˆ˜ ì‹œê°„ì— REINDEXë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.</p>
                    </div>
                </div>

                <div class="warning-item info">
                    <div class="warning-icon">â„¹ï¸</div>
                    <div class="warning-content">
                        <h3>ChargBook Collation</h3>
                        <p><strong>chargebook DB:</strong> Alpine Linux musl libc ì‚¬ìš©</p>
                        <p class="warning-detail">collation ë²„ì „ ì •ë³´ê°€ ì—†ì§€ë§Œ, ì‹¤ì œ ë¬¸ì œëŠ” ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="backup-retention">
            <h2>ğŸ—‚ï¸ ë°±ì—… ë³´ê´€ ì •ì±…</h2>
            <div class="retention-info">
                <div class="retention-item">
                    <div class="retention-icon">ğŸ“…</div>
                    <h3>ì¼ì¼ ë°±ì—…</h3>
                    <p>ìµœê·¼ 30ì¼ê°„ì˜ ë°±ì—… ìœ ì§€</p>
                </div>
                <div class="retention-item">
                    <div class="retention-icon">ğŸ“¦</div>
                    <h3>ìë™ ì •ë¦¬</h3>
                    <p>30ì¼ ì´ì „ ë°±ì—… ìë™ ì‚­ì œ</p>
                </div>
                <div class="retention-item">
                    <div class="retention-icon">ğŸ”’</div>
                    <h3>ë°±ì—… ìœ„ì¹˜</h3>
                    <p>ë¡œì»¬ ë””ìŠ¤í¬ + NAS ë™ê¸°í™”</p>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2026 Wan Bae. Automated with Cron.</p>
            <p class="footer-note">Backup data collected daily at 03:00 UTC</p>
        </div>
    </footer>

    <script src="../assets/js/main.js"></script>
    <script src="backups.js"></script>
</body>
</html>
